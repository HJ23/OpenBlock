<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>OpenBlock</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/openblock.PNG" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,600;1,700&family=Inter:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Cardo:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">

  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/css/upload.css" rel="stylesheet">
  <script src="https://code.iconify.design/iconify-icon/1.0.2/iconify-icon.min.js"></script>


  <link href="assets/css/main.css" rel="stylesheet">

</head>

<body>

  <header id="header" class="header d-flex align-items-center fixed-top">
    <div class="container-fluid d-flex align-items-center justify-content-between">

      <a href="index.html" class="logo d-flex align-items-center  me-auto me-lg-0">
        <div class="container">
          <a class="navbar-brand" href="#">
            <img src="assets/img/openblock.PNG" alt="" width="60" height="60">
          </a>
        </div>    
      </a>

      <nav id="navbar" class="navbar">
        <ul>
          <li><a href="/index">Home</a></li>
          <li class="dropdown"><a href="#"><span>Collections</span> <i class="bi bi-chevron-down dropdown-indicator"></i></a>
              <ul>
                <li><a href="/collections?id=1">Cryptopunks</a></li>
                <li><a href="/collections?id=2">Mutant Ape Yacht Club</a></li>
                <li><a href="/collections?id=3">Bored Ape Yacht Club</a></li>
                <li><a href="/collections?id=4">Moonbirds</a></li>
                <li><a href="/collections?id=5">The Potatoz</a></li>
                <li><a href="/collections?id=6">PANKSNOTDED</a></li>
                <li><a class="text-danger" href="/auction">Auction</a></li> 
              </ul>
              
          </li>
          <li><a th:href="'/increaseBalance?id='+${id}">My balance</a></li>
          <li><a  href="/addCard">Add Card</a></li>
          <li><a href="/contact">Contact</a></li>
          
        </ul>
      </nav><!-- .navbar -->
      
    </div>
  </header><!-- End Header -->

  <main id="main" data-aos="fade" data-aos-delay="1500">

    <!-- ======= End Page Header ======= -->
    <div class="page-header d-flex align-items-center">
      <div class="container position-relative">
        <div class="row d-flex justify-content-center">
          <div class="col-lg-6 text-center">
            <h2 th:text="${user.getFirstName() + ' ' + user.getLastName()}"></h2>
          </div>
        </div>
      </div>
    </div>

    <section id="about" class="about">
      <div class="container">

        <div class="row gy-4 justify-content-center">
          <div class="col-lg-4">
            <img th:src="${user.getProfilePic()}" class="img-fluid" alt="">

          </div>
          

          <div class="col-lg-5 content">
            <h2>User Profile :</h2>
            <p class="fst-italic py-3">
             
            </p>
            <div class="row">
              <div class="col-lg-6">
                <ul>
                  <li><i class="bi bi-chevron-right"></i> <strong>First name:</strong> <span th:text="${user.getFirstName()}"></span> </li>
                  <li><i class="bi bi-chevron-right"></i> <strong>Last name:</strong> <span th:text="${user.getLastName()}"></span></li>
                  <li><i class="bi bi-chevron-right"></i> <strong>Phone:</strong> <span th:text="${user.getMobile()}"></span></li>
                  <li><i class="bi bi-chevron-right"></i> <strong>Email:</strong> <span th:text="${user.getEmail()}"></span></li>
                  <li><i class="bi bi-chevron-right"></i> <strong>Created:</strong> <span th:text="${user.getCreatedAt().toString()}"></span></li>
                  <li><i class="bi bi-chevron-right"></i> <strong>Private crypto address:</strong> <span th:text="${user.getPrivateUserToken()}"></span></li>
                  <li><i class="bi bi-chevron-right"></i> <strong>My balance: </strong> <span th:text="${user.getBalance()}"></span><iconify-icon icon="fa-brands:ethereum"></iconify-icon></li>
                  

                  <li th:if="${cards.size()>0}">
                    <i class="bi bi-chevron-right"></i> <strong>Saved cards:</strong>
                    <ul>
                    <li  th:each="card : ${cards}">
                     <i class="bi bi-chevron-right"></i>
                     <span th:text="${card.getCardNumber()}">  </span>
                    </li>
                    </ul>
                  </li>
                  
                  <li th:if="${nfts.size()>0}">
                    <i class="bi bi-chevron-right"></i> <strong>NFTs you own :</strong> 
                    <ul> 
                      <li  th:each="nft : ${nfts}">
                        <i class="bi bi-chevron-right"></i>
                        <span th:text="${nft.getToken()}">  </span>
                       </li>
                    <ul>
                  </li> 


                </ul>
              </div>
              
            </div>
            
          </div>
        </div>

      </div>
    </section>

    
    <section id="hero" class="hero d-flex flex-column justify-content-center align-items-center">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-lg-6 text-center">
            <h2><span>Edit profile</span></h2>
          </div>
        </div>
      </div>
    </section><!-- End Hero Section -->
    <section id="contact" class="contact">
      <div class="container">


        <div class="row justify-content-center mt-4">

          <div class="col-lg-5">

            <form class="php-email-form" enctype="multipart/form-data">

              <div class="form-group mb-4">
              <label for="file-upload" class="custom-file-upload">
                <i class="fa fa-cloud-upload"></i> Upload Picture
            </label>
            <input id="file-upload" type="file" name="profilePic"/>
            </div>
              
              <div class="form-group mb-4">
                 <input type="text" class="form-control" name="mobile" id="mobile" placeholder="Mobile number" required>
              </div>
              <div class="form-group mb-4">
                <input type="email" class="form-control" name="email" id="email" placeholder="Email" required>
              </div>
              <div class="form-group mb-4">
                <input type="password" class="form-control" name="newPassword" id="newPassword" placeholder="Old password" required> 
              </div>
              <div class="form-group mb-4">
                <input type="password" class="form-control" name="oldPassword" id="oldPassword" placeholder="New password" required> 
              </div>

              <div class="my-3">
                <div class="loading"></div>
                <div class="error-message"></div>
                <div class="sent-message">Changed !</div>
              </div>
              <div class="text-center"><button type="button" onclick="submitChange()">Change</button></div>
            </form>
          </div><!-- End Contact Form -->

        </div>

      </div>
    </section><!-- End Contact Section -->

  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer" class="footer">
    <div class="container">
      <div class="copyright">
        &copy; Copyright <strong><span>OpenBlock</span></strong>. All Rights Reserved
      </div>
      <div class="credits">
      </div>
    </div>
  </footer><!-- End Footer -->

  <a href="#" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <div id="preloader">
    <div class="line"></div>
  </div>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

  
  <script>


    function submitChange(){
    var profilePic = $('#file-upload').get(0).files[0];
    var mobile = $('#mobile').val();
    var password = $('#newPassword').val();
    var email = $('#email').val();
    
    var formData = new FormData();
    formData.append('profilePic', profilePic);
    formData.append('mobile', mobile );
    formData.append('newPassword', password);
    formData.append('email', email);
   
    $.ajax({
      type: "POST",
      url: "/api/v1/profile",
      data: formData,
      contentType: false,
      processData: false,
      cache: false,
      statusCode: {
        202:function(data) {
        alert("success");
        window.location.href="/profile";
        }}
    });
  }

   </script>

</body>

</html>